import{_ as R,a as E,f as K,c as y,R as c,l as O,b as P,r as B,d as h,e as F,g as $,k as x}from"./index.643a4602.js";import{P as A,E as D}from"./index.a7e9ada9.js";import{C as j}from"./ConfigReceiver.47be707e.js";function X(s){var l=Y();return function(){var o=h(s),e;if(l){var t=h(this).constructor;e=Reflect.construct(o,arguments,t)}else e=o.apply(this,arguments);return F(this,e)}}function Y(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var w={number:["1","2","3","4","5","6","7","8","9","","0","close"],price:["1","2","3","4","5","6","7","8","9",".","0","close"],idcard:["1","2","3","4","5","6","7","8","9","X","0","close"]},U=function(s){R(i,s);var l=X(i);function i(){var o;E(this,i);for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return o=l.call.apply(l,[this].concat(t)),o.touchLongPressTimer=void 0,o.mouseLongPressTimer=void 0,o.onTouchLongPressIn=function(r){o.onKeyClick(r),o.touchLongPressTimer=setTimeout(function(){o.touchLongPressTimer=setInterval(function(){o.onKeyClick(r)},100)},800)},o.onTouchLongPressOut=function(r){r.preventDefault(),clearInterval(o.touchLongPressTimer)},o.onMouseLongPressIn=function(r){o.onKeyClick(r),o.mouseLongPressTimer=setTimeout(function(){o.mouseLongPressTimer=setInterval(function(){o.onKeyClick(r)},100)},800)},o.onMouseLongPressOut=function(r){r.preventDefault(),clearInterval(o.mouseLongPressTimer)},o.onKeyClick=function(r){if(r.length!==0){var a=o.props.onKeyClick;typeof a=="function"&&a(r)}},o.getKeys=function(){var r=o.props.type;return r?w[r]:w.number},o.renderKey=function(r,a){var u=o.props.prefixCls,f=K("".concat(u,"__item"),y({},"".concat(u,"__item--disabled"),r.length===0));return c.createElement("div",{className:f,key:+a,onClick:function(){return o.onKeyClick(r)}},r==="close"?c.createElement(O.Keyboard,{size:"lg"}):r)},o}return P(i,[{key:"render",value:function(){var e=this,t=this.props,n=t.prefixCls,r=t.className,a=t.locale,u=K(n,r);return c.createElement("div",{className:u,onClick:function(p){return p.stopPropagation()}},c.createElement("div",{className:"".concat(n,"__keys")},this.getKeys().map(this.renderKey)),c.createElement("div",{className:"".concat(n,"__handle")},c.createElement("div",{className:"".concat(n,"__item"),onTouchStart:function(){return e.onTouchLongPressIn("delete")},onTouchEnd:this.onTouchLongPressOut,onTouchCancel:this.onTouchLongPressOut,onMouseDown:function(){return e.onMouseLongPressIn("delete")},onMouseUp:this.onMouseLongPressOut},c.createElement(O.DeleteKey,{size:"lg"})),c.createElement("div",{className:"".concat(n,"__item ").concat(n,"__item--ok"),onClick:function(){return e.onKeyClick("ok")}},a.okText)))}}]),i}(B.exports.PureComponent);U.defaultProps={prefixCls:"za-keyboard",type:"number"};var q=j("Keyboard")(U);function G(s){var l=J();return function(){var o=h(s),e;if(l){var t=h(this).constructor;e=Reflect.construct(o,arguments,t)}else e=o.apply(this,arguments);return F(this,e)}}function J(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var M=function(s){R(i,s);var l=G(i);function i(o){var e;return E(this,i),e=l.call(this,o),e.onKeyClick=function(t){["ok","close"].indexOf(t)>-1&&e.setState({visible:!1});var n=e.props.onKeyClick;typeof n=="function"&&n(t)},e.state={visible:o.visible},e}return P(i,[{key:"render",value:function(){var e=this.props,t=e.prefixCls,n=e.className,r=e.destroy,a=$(e,["prefixCls","className","destroy"]),u=this.state.visible;return c.createElement(A,{className:n,visible:u,mask:!1,destroy:r},c.createElement("div",{className:t},c.createElement(q,x({},a,{onKeyClick:this.onKeyClick}))))}}],[{key:"getDerivedStateFromProps",value:function(e){return"visible"in e?{visible:e.visible}:null}}]),i}(B.exports.PureComponent);M.defaultProps={prefixCls:"za-keyboard-picker",visible:!1,type:"number",destroy:!0};function N(s){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return typeof s.value!="undefined"&&s.value!==null?s.value:typeof s.defaultValue!="undefined"&&s.defaultValue!==null?s.defaultValue:l}function Q(s){var l=Z();return function(){var o=h(s),e;if(l){var t=h(this).constructor;e=Reflect.construct(o,arguments,t)}else e=o.apply(this,arguments);return F(this,e)}}function Z(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var V=function(s){R(i,s);var l=Q(i);function i(o){var e;return E(this,i),e=l.call(this,o),e.content=void 0,e.picker=void 0,e.container=void 0,e.addBlurListener=function(){D.on(document.body,"click",e.onMaskClick)},e.removeBlurListener=function(){D.off(document.body,"click",e.onMaskClick)},e.onMaskClick=function(t){var n=new RegExp("(^|\\s)".concat(e.picker.props.prefixCls,"(\\s|$)"),"g");if(!(!e.state.visible||e.state.focused)){var r=function(a){for(;a.parentNode&&a.parentNode!==document.body;){if(a===e.picker||a===e.container||n.test(a.className))return a;a=a.parentNode}}(t.target);r||e.onBlur()}},e.onKeyClick=function(t){if(["close","ok"].indexOf(t)>-1){e.onBlur();return}var n=e.state.value,r=t==="delete"?String(n).slice(0,String(n).length-1):n+t;"value"in e.props||e.setState({value:r});var a=e.props.onChange;typeof a=="function"&&a(r)},e.onFocus=function(){var t=e.props,n=t.disabled,r=t.readOnly,a=t.onFocus,u=e.state,f=u.visible,p=u.value;n||r||f||(e.setState({visible:!0}),typeof a=="function"&&a(p))},e.onBlur=function(){var t=e.state,n=t.visible,r=t.value;if(!!n){e.setState({visible:!1});var a=e.props.onBlur;typeof a=="function"&&a(r)}},e.onClear=function(){var t=e.props,n=t.onChange,r=t.onClear;e.setState({value:""},e.onFocus),r&&r(""),typeof n=="function"&&n("")},e.scrollToStart=function(){e.content.scrollLeft=0},e.scrollToEnd=function(){e.content.scrollLeft=e.content.scrollWidth},e.focus=function(){e.removeBlurListener(),e.onFocus(),setTimeout(function(){e.addBlurListener()},50)},e.blur=function(){e.onBlur()},e.state={value:N(o),visible:o.focused||!1,focused:!1},e}return P(i,[{key:"componentDidMount",value:function(){var e=this.props,t=e.autoFocus,n=e.focused;this.addBlurListener(),(t||n)&&this.onFocus()}},{key:"componentDidUpdate",value:function(){var e=this.state.visible;e?this.scrollToEnd():this.scrollToStart()}},{key:"componentWillUnmount",value:function(){this.removeBlurListener()}},{key:"render",value:function(){var e,t=this,n=this.props,r=n.prefixCls,a=n.className,u=n.type,f=n.clearable,p=n.disabled,_=n.readOnly,T=n.placeholder,k=this.state,m=k.visible,C=k.value,S=f&&"value"in this.props&&C.length>0&&"onChange"in this.props,L=K(r,"".concat(r,"--").concat(u),a,(e={},y(e,"".concat(r,"--disabled"),p),y(e,"".concat(r,"--focus"),m),y(e,"".concat(r,"--clearable"),S),y(e,"".concat(r,"--readonly"),_),e)),I=c.createElement("div",{className:"".concat(r,"__content")},(C===void 0||C==="")&&!_&&c.createElement("div",{className:"".concat(r,"__placeholder")},T),c.createElement("div",{className:"".concat(r,"__virtual-input"),ref:function(v){t.content=v}},C),c.createElement("input",{type:"hidden",value:C,disabled:p}),c.createElement(M,{ref:function(v){t.picker=v},visible:m,type:u,onKeyClick:this.onKeyClick})),g=c.createElement("div",{className:"".concat(r,"__content")},C),d=S&&c.createElement(O.CloseCircleFill,{className:"".concat(r,"__clear"),onClick:function(v){v.stopPropagation(),t.onClear()}});return c.createElement("div",{className:L,onClick:this.onFocus,ref:function(v){t.container=v}},_?g:I,d)}}],[{key:"getDerivedStateFromProps",value:function(e,t){return"value"in e&&e.value!==t.prevValue?{value:N(e),prevValue:N(e)}:null}}]),i}(B.exports.Component);V.defaultProps={prefixCls:"za-input",disabled:!1,clearable:!0};function ee(s){var l=te();return function(){var o=h(s),e;if(l){var t=h(this).constructor;e=Reflect.construct(o,arguments,t)}else e=o.apply(this,arguments);return F(this,e)}}function te(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var z=function(s){R(i,s);var l=ee(i);function i(o){var e;return E(this,i),e=l.call(this,o),e.input=void 0,e.onBlurTimeout=void 0,e.blurFromClear=void 0,e.onFocus=function(t){e.setState({focused:!0});var n=e.props.onFocus;typeof n=="function"&&n(t.target.value)},e.onBlur=function(t){var n=e.props.onBlur,r=t.target.value;e.onBlurTimeout=setTimeout(function(){!e.blurFromClear&&document.activeElement!==e.input&&(e.setState({focused:!1}),typeof n=="function"&&n(r)),e.blurFromClear=!1},200)},e.onChange=function(t){var n=e.props.onChange,r=e.state.focused,a=t.target.value;r||e.setState({focused:!0}),"value"in e.props||e.setState({value:a}),typeof n=="function"&&n(a)},e.onClear=function(){var t=e.state.isOnComposition,n=e.props,r=n.onChange,a=n.onClear;e.blurFromClear=!0,e.setState({value:""}),!t&&e.focus(),typeof r=="function"&&r(""),typeof a=="function"&&a("")},e.handleComposition=function(t){var n=e.props,r=n.onCompositionStart,a=n.onCompositionUpdate,u=n.onCompositionEnd,f=n.onChange;if(t.type==="compositionstart"&&(e.setState({isOnComposition:!0}),typeof r=="function"&&r(t)),t.type==="compositionupdate"&&typeof a=="function"&&a(t),t.type==="compositionend"){var p=t.target.value;e.setState({isOnComposition:!1}),typeof u=="function"&&u(t),typeof f=="function"&&f(p)}},e.focus=function(){e.input.focus()},e.blur=function(){e.input.blur()},e.state={focused:o.autoFocus||!1,value:N(o)},e}return P(i,[{key:"componentDidMount",value:function(){var e=this.state.focused;e&&this.input.focus()}},{key:"componentWillUnmount",value:function(){this.onBlurTimeout&&(clearTimeout(this.onBlurTimeout),this.onBlurTimeout=null)}},{key:"render",value:function(){var e,t=this,n=this.props,r=n.prefixCls,a=n.className,u=n.disabled,f=n.clearable,p=n.readOnly,_=n.type;n.onClear;var T=$(n,["prefixCls","className","disabled","clearable","readOnly","type","onClear"]),k=this.state,m=k.value,C=k.focused,S=f&&"value"in this.props&&"onChange"in this.props,L=K(r,a,(e={},y(e,"".concat(r,"--disabled"),u),y(e,"".concat(r,"--focus"),C&&m&&m.length>0),y(e,"".concat(r,"--clearable"),S),y(e,"".concat(r,"--readonly"),p),e)),I=c.createElement("input",x({},T,{value:"value"in this.props?m:void 0,autoComplete:"off",ref:function(v){t.input=v},type:_,disabled:u,onChange:this.onChange,onBlur:this.onBlur,onFocus:this.onFocus,onCompositionStart:function(v){t.handleComposition(v)},onCompositionUpdate:function(v){t.handleComposition(v)},onCompositionEnd:function(v){t.handleComposition(v)}})),g=c.createElement("div",{className:"".concat(r,"__content")},m),d=S&&c.createElement(O.CloseCircleFill,{className:"".concat(r,"__clear"),onClick:function(){t.onClear()}});return c.createElement("div",{className:L},p?g:I,d)}}],[{key:"getDerivedStateFromProps",value:function(e){return"value"in e?{value:N(e)}:null}}]),i}(B.exports.PureComponent);z.defaultProps={prefixCls:"za-input",disabled:!1,type:"text",clearable:!0,readOnly:!1};function ne(s){var l=oe();return function(){var o=h(s),e;if(l){var t=h(this).constructor;e=Reflect.construct(o,arguments,t)}else e=o.apply(this,arguments);return F(this,e)}}function oe(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var re=/[\uD800-\uDBFF][\uDC00-\uDFFF]|\n/g,ae=function(){var l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return l.replace(re,"_").length},H=function(s){R(i,s);var l=ne(i);function i(o){var e;return E(this,i),e=l.call(this,o),e.input=void 0,e.onFocus=function(t){"focused"in e.props||e.setState({focused:!0});var n=e.props.onFocus;typeof n=="function"&&n(t.target.value)},e.onBlur=function(t){"focused"in e.props||e.setState({focused:!1});var n=e.props.onBlur;typeof n=="function"&&n(t.target.value)},e.handleComposition=function(t){var n=e.props,r=n.onCompositionStart,a=n.onCompositionUpdate,u=n.onCompositionEnd,f=n.onChange;if(t.type==="compositionstart"&&typeof r=="function"&&r(t),t.type==="compositionupdate"&&typeof a=="function"&&a(t),t.type==="compositionend"){var p=t.target.value;typeof u=="function"&&u(t),typeof f=="function"&&f(p)}},e.onChange=function(t){var n=e.props.onChange,r=t.target.value;"value"in e.props||e.setState({value:r}),typeof n=="function"&&n(r)},e.state={value:N(o),focused:o.focused||!1},e}return P(i,[{key:"componentDidMount",value:function(){var e=this.props.autoFocus,t=this.state.focused;(e||t)&&this.input.focus()}},{key:"componentDidUpdate",value:function(){var e=this.props,t=e.autoHeight,n=e.rows,r=e.readOnly,a=this.state.focused;t&&(this.input.style.height="auto",this.input.scrollTop=0,this.input.style.height="".concat(this.input.scrollHeight,"px")),t&&r&&n&&(this.input.style.height="".concat(this.input.scrollHeight*n,"px")),a&&this.input.focus()}},{key:"focus",value:function(){this.input.focus()}},{key:"blur",value:function(){this.input.blur()}},{key:"render",value:function(){var e,t=this,n=this.props,r=n.prefixCls,a=n.className,u=n.maxLength,f=n.disabled,p=n.readOnly;n.autoHeight;var _=n.showLength;n.focused;var T=$(n,["prefixCls","className","maxLength","disabled","readOnly","autoHeight","showLength","focused"]),k=K(r,"".concat(r,"--textarea"),a,(e={},y(e,"".concat(r,"--disabled"),f),y(e,"".concat(r,"--readonly"),p),e)),m=this.state.value,C=ae(m),S=_&&u&&c.createElement("div",{className:"".concat(r,"__length")},"".concat(C,"/").concat(u)),L=c.createElement("textarea",x({},T,{value:"value"in this.props?m:void 0,ref:function(d){t.input=d},maxLength:u,disabled:f,onChange:this.onChange,onFocus:this.onFocus,onBlur:this.onBlur,onCompositionStart:function(d){t.handleComposition(d)},onCompositionUpdate:function(d){t.handleComposition(d)},onCompositionEnd:function(d){t.handleComposition(d)}})),I=c.createElement("div",{className:"".concat(r,"__content"),ref:function(d){t.input=d}},m);return c.createElement("div",{className:k},p?I:L,S)}}],[{key:"getDerivedStateFromProps",value:function(e){return"focused"in e||"value"in e?{value:N(e),focused:e.focused||!1}:null}}]),i}(B.exports.PureComponent);H.defaultProps={prefixCls:"za-input",disabled:!1,autoHeight:!1,showLength:!1,focused:!1};function ie(s){var l=se();return function(){var o=h(s),e;if(l){var t=h(this).constructor;e=Reflect.construct(o,arguments,t)}else e=o.apply(this,arguments);return F(this,e)}}function se(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var W=function(s){R(i,s);var l=ie(i);function i(){var o;E(this,i);for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return o=l.call.apply(l,[this].concat(t)),o.input=void 0,o}return P(i,[{key:"focus",value:function(){this.input&&this.input.focus()}},{key:"blur",value:function(){this.input&&this.input.blur()}},{key:"render",value:function(){var e=this,t=this.props,n=t.type,r=$(t,["type"]);if(n==="text"&&"rows"in this.props)return c.createElement(H,x({ref:function(u){e.input=u}},r));switch(n){case"idcard":case"price":case"number":return c.createElement(V,x({ref:function(u){e.input=u}},this.props));case"text":case"search":case"password":default:return c.createElement(z,x({ref:function(u){e.input=u}},this.props))}}}]),i}(B.exports.PureComponent);W.defaultProps={type:"text"};var fe=W;export{fe as I,q as K};
